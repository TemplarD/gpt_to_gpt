# GPT for GPT - ChatGPT аналог с тредами и Generative UI

## Описание проекта
Упрощённый аналог интерфейса ChatGPT с тредами, хранением сообщений в базе и генеративным UI на основе Vercel AI SDK.

## Стек технологий
- **Next.js 16** (App Router, TypeScript)
- **Vercel AI SDK UI** (useChat, Generative UI)
- **SQLite** база данных (через встроенный Node.js sqlite3)
- **React/Next.js**, **Tailwind CSS**
- **XLSX** (работа с таблицами)
- **OpenAI API** и **Ollama** (локальные модели)

## Установка и запуск

### 1. Установка зависимостей
```bash
npm install
```

### 2. Создание XLSX файла
```bash
node scripts/convert-to-xlsx.js
```

### 3. Запуск проекта
```bash
npm run dev
```

## Полностью реализовано:

### 1. Чат с тредами
- Список тредов слева (создание, переключение, загрузка истории)
- Сохранение сообщений в SQLite базу
- Stream и non-stream режимы ответов

### 2. Поддержка двух AI провайдеров
- **OpenAI**: настоящий streaming, требует API ключ
- **Ollama**: локальные модели, non-streaming для стабильности
- Переключение между провайдерами в реальном времени

### 3. Улучшенный UI/UX
- Многострочный ввод (Shift+Enter для новой строки)
- Индикация загрузки для каждого треда
- Кнопка остановки генерации
- Retry для неудачных сообщений
- Визуальные индикаторы статуса

### 4. Работа с XLSX таблицами
- Чтение/запись диапазонов ячеек
- Модальное окно с таблицей
- Выделение ячеек и диапазонов
- Меншоны (@Sheet1!A1:B3) для ссылок на диапазоны

### 5. Архитектура проекта
- **API роуты**: /app/api/chat/route.ts
- **UI компоненты**: /app/components/
- **Работа с БД**: /app/api/database/
- **Типы**: /app/types.ts
- **Настройки**: /app/config/

## Настройка AI провайдеров

### OpenAI (по умолчанию)
- Требуется API ключ в настройках
- Поддерживает streaming ответы
- Модель: gpt-4 (можно изменить)

### Ollama (локальные модели)
- Требуется установленный Ollama сервер
- Работает без API ключа
- Модель по умолчанию: llama2:7b
- URL: http://localhost:11434

## Особенности реализации
- **TypeScript**: строгая типизация всех компонентов
- **Error handling**: обработка ошибок API и пользовательский ввод
- **Responsive design**: адаптивный интерфейс для разных экранов
- **Database persistence**: сохранение всех тредов и сообщений
- **Real-time updates**: индикация загрузки и статуса операций

## Ограничения
- Требуется установка Node.js и npm
- Для OpenAI требуется API ключ
- Для Ollama требуется установленный сервер
- XLSX файл создается из CSV при первом запуске
- База данных SQLite хранится локально в файле chat.db

## Заключение
Проект полностью реализует требования тестового задания с дополнительными улучшениями:
- Поддержка двух AI провайдеров (OpenAI + Ollama)
- Улучшенный UX с многострочным вводом и индикацией загрузки
- Стабильная работа с таблицами XLSX
- Чистый TypeScript код с продуманной архитектурой

Готов к использованию и демонстрации!

---

Проект создан с использованием **Windsurf** и модели **Penguin Alpha**

*Windsurf - AI-powered development environment*
*Penguin Alpha - Advanced AI assistant model*
